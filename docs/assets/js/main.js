"use strict";const input=document.querySelector(".main__input"),button=document.querySelector(".main__button"),mainContainer=document.querySelector(".list__container"),baseUrl="http://api.tvmaze.com/search/shows?q=",favsContainer=document.querySelector(".fav__container"),favsArray=JSON.parse(localStorage.getItem("itemsArray"))||[];function searchShow(){const e=input.value;fetch(`${baseUrl+e}`).then(e=>e.json()).then(e=>{mainContainer.innerHTML="";const t=document.createElement("ul");t.classList.add("show__list");for(const a of e){const e=a.show.name,n=a.show.name,s=`a${a.show.id}`;let i="";i=null===a.show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":a.show.image.medium;const r=document.createElement("li");r.classList.add("show__list-item"),r.id=s;const o=document.createElement("div");o.classList.add("show__list-container");const c=document.createElement("img");c.classList.add("show__list-image"),c.src=i,c.alt=n;const d=document.createElement("h2");d.classList.add("show__list-title"),d.classList.add(`'show__list-title${s}'`);const l=document.createTextNode(e);d.appendChild(l),o.appendChild(c),o.appendChild(d),r.appendChild(o),t.appendChild(r),void 0!==favsArray.find(e=>e.id===`${s}`)&&r.classList.add("show__fav")}mainContainer.appendChild(t);const a=document.querySelectorAll(".show__list-item");for(const e of a)e.addEventListener("click",addFav)})}function addFav(e){const t=e.currentTarget,a=t.getAttribute("id"),n=t.querySelector(".show__list-title").innerHTML,s=t.querySelector(".show__list-image").src,i={id:a,title:n,image:s};if(t.classList.toggle("show__fav"),t.classList.contains("show__fav")){void 0===favsArray.find(e=>e.id===`${a}`)&&(favsArray.push(i),writeFavsArray(),localStorage.setItem("itemsArray",JSON.stringify(favsArray)))}else{let e=favsArray.find(e=>e.id===`${a}`);const t=favsArray.indexOf(e);favsArray.splice(t,1),localStorage.setItem("itemsArray",JSON.stringify(favsArray)),writeFavsArray()}}function writeFavsArray(){favsContainer.innerHTML="";const e=document.createElement("ul"),t=document.createTextNode("");e.appendChild(t),e.classList.add("fav__list");const a=document.createElement("button"),n=document.createTextNode("Reset");a.appendChild(n),a.classList.add("reset__button");for(const t of favsArray){const a=document.createElement("li");a.classList.add("fav__list-item"),a.id=t.id;const n=document.createElement("div");n.classList.add("fav__list-container");const s=document.createElement("img");s.classList.add("fav__list-image"),s.src=t.image,s.alt=t.title;const i=document.createElement("h2");i.classList.add("show__list-title");const r=document.createTextNode(t.title);i.appendChild(r);const o=document.createElement("button");o.classList.add("close__button");const c=document.createTextNode("X");o.setAttribute("type","button"),o.appendChild(c),n.appendChild(o),n.appendChild(s),n.appendChild(i),a.appendChild(n),e.appendChild(a)}e.appendChild(a),favsContainer.appendChild(e);const s=document.querySelectorAll(".close__button");for(const e of s)e.addEventListener("click",deleteStorage);document.querySelector(".reset__button").addEventListener("click",resetFav)}function deleteStorage(e){const t=e.currentTarget.parentElement.parentElement.id;let a=favsArray.find(e=>e.id===`${t}`);const n=favsArray.indexOf(a);favsArray.splice(n,1),localStorage.setItem("itemsArray",JSON.stringify(favsArray)),writeFavsArray()}function resetFav(){favsContainer.innerHTML="",mainContainer.innerHTML="",localStorage.removeItem("itemsArray")}writeFavsArray(),button.addEventListener("click",searchShow);