"use strict";console.log(">> Ready :)");const input=document.querySelector(".main__input"),button=document.querySelector(".main__button"),mainContainer=document.querySelector(".list__container"),baseUrl="http://api.tvmaze.com/search/shows?q=",favsContainer=document.querySelector(".fav__container"),favsArray=JSON.parse(localStorage.getItem("itemsArray"))||[];function searchShow(){const e=input.value;fetch(`${baseUrl+e}`).then(e=>e.json()).then(e=>{mainContainer.innerHTML="";const t=document.createElement("ul");t.classList.add("show__list");for(let a=0;a<e.length;a++){const s=e[a].show.name,n=e[a].show.name,i=`a${e[a].show.id}`;let o="";o=null===e[a].show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e[a].show.image.medium;const l=document.createElement("li");l.classList.add("show__list-item"),l.id=i;const r=document.createElement("div");r.classList.add("show__list-container");const c=document.createElement("img");c.classList.add("show__list-image"),c.src=o,c.alt=n;const d=document.createElement("h2");d.classList.add("show__list-title"),d.classList.add(`'show__list-title${i}'`);const m=document.createTextNode(s);d.appendChild(m),r.appendChild(c),r.appendChild(d),l.appendChild(r),t.appendChild(l)}mainContainer.appendChild(t);const a=document.querySelectorAll(".show__list-item");for(let e=0;e<a.length;e++)a[e].addEventListener("click",addFav)})}function addFav(e){const t=e.currentTarget,a={id:t.getAttribute("id"),title:t.querySelector(".show__list-title").innerHTML,image:t.querySelector(".show__list-image").src};if(t.classList.toggle("show__fav"),t.classList.contains("show__fav"))!1===favsArray.includes(a)&&(favsArray.push(a),writeFavsArray(),localStorage.setItem("itemsArray",JSON.stringify(favsArray)));else{const e=favsArray.indexOf(a);console.log(favsArray.indexOf(a)),favsArray.splice(e,1),localStorage.setItem("itemsArray",JSON.stringify(favsArray)),writeFavsArray()}}function writeFavsArray(){favsContainer.innerHTML="";const e=document.createElement("ul");e.classList.add("fav__list");for(const t of favsArray){const a=document.createElement("li");a.classList.add("fav__list-item"),a.id=t.id;const s=document.createElement("div");s.classList.add("fav__list-container");const n=document.createElement("img");n.classList.add("fav__list-image"),n.src=t.image,n.alt=t.title;const i=document.createElement("h2");i.classList.add("show__list-title");const o=document.createTextNode(t.title);i.appendChild(o),s.appendChild(n),s.appendChild(i),a.appendChild(s),e.appendChild(a)}favsContainer.appendChild(e)}writeFavsArray(),button.addEventListener("click",searchShow);