"use strict";const input=document.querySelector(".main__input"),button=document.querySelector(".main__button"),mainContainer=document.querySelector(".list__container"),baseUrl="http://api.tvmaze.com/search/shows?q=",favsContainer=document.querySelector(".fav__container"),favsArray=JSON.parse(localStorage.getItem("itemsArray"))||[];function searchShow(){const e=input.value;fetch(`${baseUrl+e}`).then(e=>e.json()).then(e=>{mainContainer.innerHTML="";const t=document.createElement("ul");t.classList.add("show__list");for(const a of e){const e=a.show.name,s=a.show.name,n=`a${a.show.id}`;let i="";i=null===a.show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":a.show.image.medium;const r=document.createElement("li");r.classList.add("show__list-item"),r.id=n;const o=document.createElement("div");o.classList.add("show__list-container");const c=document.createElement("img");c.classList.add("show__list-image"),c.src=i,c.alt=s;const d=document.createElement("h2");d.classList.add("show__list-title"),d.classList.add(`'show__list-title${n}'`);const l=document.createTextNode(e);d.appendChild(l),o.appendChild(c),o.appendChild(d),r.appendChild(o),t.appendChild(r),void 0!==favsArray.find(e=>e.id===`${n}`)&&r.classList.add("show__fav")}mainContainer.appendChild(t);const a=document.querySelectorAll(".show__list-item");for(const e of a)e.addEventListener("click",addFav)})}function addFav(e){const t=e.currentTarget,a=t.getAttribute("id"),s=t.querySelector(".show__list-title").innerHTML,n=t.querySelector(".show__list-image").src,i={id:a,title:s,image:n};if(t.classList.toggle("show__fav"),t.classList.contains("show__fav")){void 0===favsArray.find(e=>e.id===`${a}`)&&(favsArray.push(i),writeFavsArray(),localStorage.setItem("itemsArray",JSON.stringify(favsArray)))}else{let e=favsArray.find(e=>e.id===`${a}`);const t=favsArray.indexOf(e);favsArray.splice(t,1),localStorage.setItem("itemsArray",JSON.stringify(favsArray)),writeFavsArray()}}function writeFavsArray(){favsContainer.innerHTML="";const e=document.createElement("ul"),t=document.createTextNode("Favoritos");e.appendChild(t),e.classList.add("fav__list");const a=document.createElement("button"),s=document.createTextNode("Reset");a.appendChild(s),a.classList.add("reset__button");for(const t of favsArray){const a=document.createElement("li");a.classList.add("fav__list-item"),a.id=t.id;const s=document.createElement("div");s.classList.add("fav__list-container");const n=document.createElement("img");n.classList.add("fav__list-image"),n.src=t.image,n.alt=t.title;const i=document.createElement("h2");i.classList.add("show__list-title");const r=document.createTextNode(t.title);i.appendChild(r);const o=document.createElement("button");o.classList.add("close__button");const c=document.createTextNode("Borrar");o.setAttribute("type","button"),o.appendChild(c),s.appendChild(o),s.appendChild(n),s.appendChild(i),a.appendChild(s),e.appendChild(a)}e.appendChild(a),favsContainer.appendChild(e);const n=document.querySelectorAll(".close__button");for(const e of n)e.addEventListener("click",deleteStorage);document.querySelector(".reset__button").addEventListener("click",resetFav)}function deleteStorage(e){const t=e.currentTarget.parentElement.parentElement.id;let a=favsArray.find(e=>e.id===`${t}`);const s=favsArray.indexOf(a);favsArray.splice(s,1),localStorage.setItem("itemsArray",JSON.stringify(favsArray)),writeFavsArray()}function resetFav(){favsContainer.innerHTML="AÃ±adir Favoritos",localStorage.removeItem("itemsArray")}writeFavsArray(),button.addEventListener("click",searchShow);